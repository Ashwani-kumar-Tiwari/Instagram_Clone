(this["webpackJsonpinstagram-clone"]=this["webpackJsonpinstagram-clone"]||[]).push([[0],{104:function(e,t,a){},105:function(e,t,a){},162:function(e,t){e.exports={apiKey:"AIzaSyCmqqJVQvjMv6tInpx1OxV0y8E_EiN_EGI",authDomain:"instagram-clone-8aec9.firebaseapp.com",projectId:"instagram-clone-8aec9",storageBucket:"instagram-clone-8aec9.appspot.com",messagingSenderId:"1022757748325",appId:"1:1022757748325:web:8976e2fd4ee6126c2b508c",measurementId:"G-BCRWSJ515V"}},173:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(16),o=a.n(s),r=(a(104),a(12)),i=(a(105),a(200)),l=a(23),u=a.n(l),p=(a(62),a(89),a(88),a(162)),d=u.a.initializeApp(p).firestore(),j=u.a.auth(),m=u.a.storage(),b=a(3);var g=function(e){var t=e.postId,a=e.user,c=e.username,s=e.caption,o=e.imageUrl,l=Object(n.useState)([]),p=Object(r.a)(l,2),j=p[0],m=p[1],g=Object(n.useState)(""),h=Object(r.a)(g,2),f=h[0],O=h[1];return Object(n.useEffect)((function(){var e;return t&&(e=d.collection("posts").doc(t).collection("comments").orderBy("timestamp","desc").onSnapshot((function(e){m(e.docs.map((function(e){return e.data()})))}))),function(){e()}}),[t]),Object(b.jsxs)("div",{className:"post",children:[Object(b.jsxs)("div",{className:"post_header",children:[Object(b.jsx)(i.a,{className:"post_avatar",alt:c,src:"/static/images/avatar/1.png"}),Object(b.jsx)("h3",{children:c})]}),Object(b.jsx)("img",{className:"post_image",src:o,alt:""}),Object(b.jsxs)("h4",{className:"post_text",children:[Object(b.jsx)("strong",{children:c})," ",s]}),Object(b.jsx)("div",{className:"post_commnets",children:j.map((function(e){return Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:e.username})," ",e.text]})}))}),a&&Object(b.jsxs)("form",{className:"post_commentBox",children:[Object(b.jsx)("input",{className:"post_input",type:"text",placeholder:"Add a comment....",value:f,onChange:function(e){return O(e.target.value)}}),Object(b.jsx)("button",{className:"post_button",disabled:!f,type:"submit",onClick:function(e){e.preventDefault(),console.log(a),d.collection("posts").doc(t).collection("comments").add({text:f,username:a.displayName,timestamp:u.a.firestore.FieldValue.serverTimestamp()}),O("")},children:"Post"})]})]})},h=a(196),f=a(197),O=a(199),x=a(198);var v=function(e){var t=e.username,a=Object(n.useState)(""),c=Object(r.a)(a,2),s=c[0],o=c[1],i=Object(n.useState)(null),l=Object(r.a)(i,2),p=l[0],j=l[1],g=Object(n.useState)(0),h=Object(r.a)(g,2),f=h[0],O=h[1];return Object(b.jsxs)("div",{className:"image_Upload",children:[Object(b.jsx)("progress",{className:"image_Upload_Progress",value:f,max:"100"}),Object(b.jsx)("input",{type:"text",placeholder:"Enter a Caption....",onChange:function(e){return o(e.target.value)},value:s}),Object(b.jsx)("input",{type:"file",onChange:function(e){e.target.files[0]&&j(e.target.files[0])}}),Object(b.jsx)(x.a,{className:"imageupload_button",onClick:function(){m.ref("images/".concat(p.name)).put(p).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);O(t)}),(function(e){console.log(e),alert(e.message)}),(function(){m.ref("images").child(p.name).getDownloadURL().then((function(e){d.collection("posts").add({timestamp:u.a.firestore.FieldValue.serverTimestamp(),caption:s,imageUrl:e,username:t}),O(0),o(""),j(null)}))}))},children:"Upload"})]})},_=a(95);function N(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var w=Object(h.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var y=function(){var e=w(),t=Object(n.useState)(N),a=Object(r.a)(t,1)[0],c=Object(n.useState)([]),s=Object(r.a)(c,2),o=s[0],i=s[1],l=Object(n.useState)(!1),u=Object(r.a)(l,2),p=u[0],m=u[1],h=Object(n.useState)(!1),y=Object(r.a)(h,2),S=y[0],C=y[1],I=Object(n.useState)(""),k=Object(r.a)(I,2),U=k[0],E=k[1],B=Object(n.useState)(""),A=Object(r.a)(B,2),P=A[0],F=A[1],D=Object(n.useState)(""),L=Object(r.a)(D,2),T=L[0],V=L[1],J=Object(n.useState)(null),W=Object(r.a)(J,2),G=W[0],M=W[1];return Object(n.useEffect)((function(){var e=j.onAuthStateChanged((function(e){e?(console.log(e),M(e)):M(!1)}));return function(){return e()}}),[G,T]),Object(n.useEffect)((function(){d.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){i(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),Object(b.jsxs)("div",{className:"app",children:[Object(b.jsx)(f.a,{open:p,onClose:function(){return m(!1)},children:Object(b.jsx)("div",{style:a,className:e.paper,children:Object(b.jsxs)("form",{className:"app_signup",children:[Object(b.jsx)("center",{children:Object(b.jsx)("img",{className:"app_headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""})}),Object(b.jsx)(O.a,{placeholder:"User Name",type:"text",value:T,onChange:function(e){return V(e.target.value)}}),Object(b.jsx)(O.a,{placeholder:"email",type:"text",value:U,onChange:function(e){return E(e.target.value)}}),Object(b.jsx)(O.a,{placeholder:"password",type:"password",value:P,onChange:function(e){return F(e.target.value)}}),Object(b.jsx)(x.a,{type:"submit",onClick:function(e){e.preventDefault(),j.createUserWithEmailAndPassword(U,P).then((function(e){return e.user.updateProfile({displayName:T})})).catch((function(e){return alert(e.messaage)})),m(!1)},children:"Sign Up"})]})})}),Object(b.jsx)(f.a,{open:S,onClose:function(){return C(!1)},children:Object(b.jsx)("div",{style:a,className:e.paper,children:Object(b.jsxs)("form",{className:"app_signin",children:[Object(b.jsx)("center",{children:Object(b.jsx)("img",{className:"app_headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""})}),Object(b.jsx)(O.a,{placeholder:"email",type:"text",value:U,onChange:function(e){return E(e.target.value)}}),Object(b.jsx)(O.a,{placeholder:"password",type:"password",value:P,onChange:function(e){return F(e.target.value)}}),Object(b.jsx)(x.a,{type:"submit",onClick:function(e){e.preventDefault(),j.signInWithEmailAndPassword(U,P).catch((function(e){return alert(e.messaage)})),C(!1)},children:"Sign In"})]})})}),Object(b.jsxs)("div",{className:"app_header",children:[Object(b.jsx)("img",{className:"app_headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""}),G?Object(b.jsx)(x.a,{onClick:function(){return j.signOut()},children:"Logout"}):Object(b.jsxs)("div",{className:"app_loginContainer",children:[Object(b.jsx)(x.a,{onClick:function(){return C(!0)},children:"Sign In"}),Object(b.jsx)(x.a,{onClick:function(){return m(!0)},children:"Sign Up"})]})]}),Object(b.jsx)("h1",{children:"Like you, be strong, to hold the powers of the sun"}),Object(b.jsxs)("div",{className:"app_posts",children:[Object(b.jsx)("div",{className:"app_posts_left",children:o.map((function(e){var t=e.id,a=e.post;return Object(b.jsx)(g,{postId:t,user:G,username:a.username,caption:a.caption,imageUrl:a.imageUrl},t)}))}),Object(b.jsx)("div",{className:"app_posts_right",children:Object(b.jsx)(_.a,{url:"https://www.instagram.com/p/B_uf9dmAGPw/",maxWidth:320,hideCaption:!1,containerTagName:"div",protocol:"",injectScript:!0,onLoading:function(){},onSuccess:function(){},onAfterRender:function(){},onFailure:function(){}})})]}),(null===G||void 0===G?void 0:G.displayName)?Object(b.jsx)(v,{username:G.displayName}):Object(b.jsx)("h3",{children:"You need to login to upload the post"})]})},S=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,202)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,o=t.getTTFB;a(e),n(e),c(e),s(e),o(e)}))};o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(y,{})}),document.getElementById("root")),S()}},[[173,1,2]]]);
//# sourceMappingURL=main.0b8d752d.chunk.js.map